### npm

npm å…¨ç§° Node Package Manager ï¼Œã€Node çš„åŒ…ç®¡ç†å·¥å…·ã€
npm æ˜¯ node.js å®˜æ–¹å†…ç½®çš„åŒ…ç®¡ç†å·¥å…·

å³ç®¡ç†å½“å‰å·¥ç¨‹å¼•ç”¨çš„åŒ…ï¼ˆä»£ç åº“ï¼‰çš„å·¥å…·

#### 1. åˆå§‹åŒ–

åœ¨å‘½ä»¤è¡Œè¿è¡Œ npm init

æ­¤æ—¶é€šè¿‡ä¸€ä¸ªäº¤äº’å¼çš„è¿‡ç¨‹å®Œæˆåˆå§‹åŒ–ï¼Œå³å»ºç«‹ä¸€ä¸ª package.json æ–‡ä»¶

å³æ ¹æ®å›ç­”é—®é¢˜çš„æ–¹å¼åˆ›å»ºä¸€ä¸ª package.json æ–‡ä»¶

ä½¿ç”¨å‚æ•° -y / --yes å¯ä»¥åˆ›å»ºä¸€ä¸ªå…¨é€‰é»˜è®¤å€¼çš„ package.json

#### 2. å…³äº package.json çš„å±æ€§

ä»¥æœ¬æ–‡ä»¶å¤¹é»˜è®¤åˆå§‹åŒ–çš„ package.json ä¸ºä¾‹

```
{
  "name": "npm", / åŒ…åï¼Œæˆ–æ–‡ä»¶å
  "version": "1.0.0", / ç‰ˆæœ¬
  "description": "", / æè¿°ï¼Œç®€ä»‹
  "main": "index.js", / å…¥å£æ–‡ä»¶
  "scripts": { / è„šæœ¬
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "keywords": [], / å…³é”®è¯ï¼Œç”¨äºå‘å¸ƒåå¸®åŠ©æœç´¢
  "author": "", / ä½œè€…
  "license": "ISC" / å¼€æºåè®®
}
```

è¡¥å……ï¼šç‰ˆæœ¬å·

**ç‰ˆæœ¬è§„èŒƒï¼š**

[semver](https://semver.org/lang/zh-CN/)ï¼š[npm semver](https://docs.npmjs.com/misc/semver)ï¼š

X.Y.Z

ä¸»ç‰ˆæœ¬å·ï¼šå‘å¸ƒäº†ä¸å…¼å®¹çš„ç‰ˆæœ¬

æ¬¡ç‰ˆæœ¬å·ï¼šå‘ä¸‹å…¼å®¹çš„æ–°å¢åŠŸèƒ½

ä¿®è®¢å·ï¼šå‘ä¸‹å…¼å®¹çš„é—®é¢˜ä¿®å¤

#### 3. æœç´¢åŒ…

```
npm m keywards
```

æˆ– åœ¨ [npm (npmjs.com)](https://www.npmjs.com/) æœç´¢

#### 4. å®‰è£…åŒ…

```
npm i
npm install
```

ç›´æ¥è¿è¡Œæ­¤å‘½ä»¤å›æŒ‰ç…§ package-lock.json è®°å½•çš„ä¾èµ–çš„ç‰ˆæœ¬ã€ç¼“å­˜ç­‰ä¿¡æ¯å®‰è£…æ‰€æœ‰çš„ä¾èµ–

ç”Ÿäº§ä¾èµ–å’Œå¼€å‘ä¾èµ–

| ç±»å‹     | å‘½ä»¤                                         | è¡¥å……                                                                                 |
| -------- | -------------------------------------------- | ------------------------------------------------------------------------------------ |
| ç”Ÿäº§ä¾èµ– | npm i -S uniq<br />npm i --save uniq         | -S ç­‰æ•ˆäº --saveï¼Œ -S æ˜¯é»˜è®¤é€‰é¡¹<br />åŒ…ä¿¡æ¯ä¿å­˜åœ¨ package.json ä¸­ dependencies å±æ€§ |
| å¼€å‘ä¾èµ– | npm i -D less<br />npm i --save-dev lessÂ Â  | -DÂ ç­‰æ•ˆäº --save-dev<br />åŒ…ä¿¡æ¯ä¿å­˜åœ¨ package.json ä¸­ devDependencies å±æ€§         |

```
npm i -S name //æˆ–é»˜è®¤çŠ¶æ€ä¸‹ï¼Œä¹Ÿæ˜¯å®‰è£…å¼€å‘ä¾èµ–
npm i -D name //å®‰è£…ç”Ÿäº§ä¾èµ–
```

æŒ‡å®šç‰ˆæœ¬

```
npm i name@1.1.1
```

åˆ é™¤

```
## å±€éƒ¨åˆ é™¤
npm remove uniq
npm r uniq
## å…¨å±€åˆ é™¤
npm remove -g nodemon
```


#### 5. å¼•å…¥åŒ…

```
const dayjs = require('dayjs')
```

å®é™…ä¸Šå¼•å…¥çš„æ˜¯ ./node_modules ä¸­å¯¹åº”çš„æ–‡ä»¶


åœ¨ require ä¸­é€šè¿‡æ¨¡å—åå’Œè·¯å¾„å¼•å…¥çš„åŒºåˆ«

æ¨¡å—åï¼š

åœ¨å½“å‰ ./node_modules ä¸­æŸ¥æ‰¾ï¼›

æ²¡æœ‰åˆ™åœ¨çˆ¶ç›®å½•ä¸‹çš„./node_modulesä¸­æŸ¥æ‰¾ï¼›

è·¯å¾„ï¼š

åœ¨æŒ‡å®šè·¯å¾„æŸ¥æ‰¾


#### 6. é…ç½®å‘½ä»¤åˆ«å

åœ¨ package.json ä¸­çš„ script å±æ€§ä¸­æ·»åŠ 

```
"scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
```

#### 7. cnpm

æ·˜å®é•œåƒç½‘å€https://npmmirror.com/

cnpm æœåŠ¡éƒ¨ç½²åœ¨å›½å†… é˜¿é‡Œäº‘æœåŠ¡å™¨ä¸Š ï¼Œ å¯ä»¥æé«˜åŒ…çš„ä¸‹è½½é€Ÿåº¦

å³ cnpm æ˜¯å®˜æ–¹æä¾›çš„ä¸€ä¸ªåŒ…ç®¡ç†å·¥å…·

| åŠŸèƒ½         | å‘½ä»¤                                                                       |
| ------------ | -------------------------------------------------------------------------- |
| åˆå§‹åŒ–       | cnpm init / cnpm init                                                      |
| å®‰è£…åŒ…       | cnpm i uniq<br />cnpm i -S uniq<br />cnpm i -D uniq<br />cnpm i -g nodemon |
| å®‰è£…é¡¹ç›®ä¾èµ– | cnpm i                                                                     |
| åˆ é™¤         | cnpm r uniq                                                                |

ä½¿ç”¨npm ä½†é…ç½® æ·˜å®é•œåƒ

```
npm config set registry https://registry.npmmirror.com/
```

ä½¿ç”¨ nrm å·¥å…·é…ç½®

1. å®‰è£… nrm

   ```
   npm i -g nrm
   ```
2. ä¿®æ”¹é•œåƒ

   ```
   nrm use taobao
   ```
3. æ£€æŸ¥æ˜¯å¦é…ç½®æˆåŠŸï¼ˆé€‰åšï¼‰
   æ£€æŸ¥ registry åœ°å€æ˜¯å¦ä¸º https://registry.npmmirror.com/ , å¦‚æœ æ˜¯ åˆ™è¡¨æ˜æˆåŠŸ

   ```
   npm config list
   ```

#### 8. å…³äºå‘å¸ƒ

å‰ç½®æ¡ä»¶

* æ³¨å†Œè´¦å· https://www.npmjs.com/signup
* æ¿€æ´»è´¦å· ï¼ˆ ä¸€å®šè¦æ¿€æ´»è´¦å· ï¼‰
* ä¿®æ”¹ä¸ºå®˜æ–¹çš„å®˜æ–¹é•œåƒ (å‘½ä»¤è¡Œä¸­è¿è¡Œ nrm use npm )

åˆ›å»ºåŒ…

1. åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œå¹¶åˆ›å»ºæ–‡ä»¶ index.jsï¼Œ åœ¨æ–‡ä»¶ä¸­å£°æ˜å‡½æ•°ï¼Œä½¿ç”¨ module.exports æš´éœ²
2. npm åˆå§‹åŒ–å·¥å…·åŒ…ï¼Œpackage.json å¡«å†™åŒ…çš„ä¿¡æ¯ (åŒ…çš„åå­—æ˜¯å”¯ä¸€çš„)

å‘å¸ƒåŒ…

1. å‘½ä»¤è¡Œä¸‹ npm login å¡«å†™ç›¸å…³ç”¨æˆ·ä¿¡æ¯
2. å‘½ä»¤è¡Œä¸‹ npm publish æäº¤åŒ… ğŸ‘Œ

å‘å¸ƒæ›´æ–°

æ›´æ”¹ä»£ç ï¼Œå¹¶æ›´æ”¹ç‰ˆæœ¬å·

```
npm publish
```

åˆ é™¤åŒ…

```
npm unpublish --force
```

æ¡ä»¶ï¼šhttps://docs.npmjs.com/policies/unpublish

ä½ æ˜¯åŒ…çš„ä½œè€…
å‘å¸ƒå°äº 24 å°æ—¶
å¤§äº 24 å°æ—¶åï¼Œæ²¡æœ‰å…¶ä»–åŒ…ä¾èµ–ï¼Œå¹¶ä¸”æ¯å‘¨å°äº 300 ä¸‹è½½é‡ï¼Œå¹¶ä¸”åªæœ‰ä¸€ä¸ªç»´æŠ¤è€…
